/*! 2019-06-27 17:50:00 */
(window.webpackJsonp=window.webpackJsonp||[]).push([[7,15],{650:function(e,t,n){"use strict";n.r(t);var r=n(702),o=n(672),c=n(1),a=n.n(c);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,c=void 0;try{for(var a,i=e[Symbol.iterator]();!(r=(a=i.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(o)throw c}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}t.default=function(e){var t=e.saveData,n=e.onCancel,u=i(Object(c.useState)(""),2),s=u[0],f=u[1];return a.a.createElement(r.a,{title:"\u8bf7\u8f93\u5165\u7ba1\u7406\u5458\u5bc6\u7801",visible:!0,width:300,onOk:function(){t(s)},onCancel:n},a.a.createElement(o.a,{type:"password",style:{width:"100%"},onPressEnter:function(){t(s)},onChange:function(e){f(e.target.value)}}))}},655:function(e,t,n){"use strict";n.r(t),function(e){var r=n(46),o=n(663),c=n(667),a=n(678),i=n(679),u=n(95),s=n(1),f=n(707),l=n.n(f),p=n(650);function m(e,t,n,r,o,c,a){try{var i=e[c](a),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,o)}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,c=void 0;try{for(var a,i=e[Symbol.iterator]();!(r=(a=i.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(o)throw c}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var h=window.require("path"),v=window.require("child_process").exec;var d=window.require("electron").remote.app.getPath("home");t.default=function(){var t=u.a.get("config"),n=t.hostPath,f=t.sudo_pswd,b=y(Object(s.useState)(""),2),w=b[0],g=b[1],O=y(Object(s.useState)(!1),2),E=O[0],j=O[1],S=y(Object(s.useState)("success"),2),C=S[0],P=S[1],x=y(Object(s.useState)(f),2),k=x[0],F=x[1];Object(s.useEffect)(function(){D()},[]);var _=function(){return j(!1)},D=(R=regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:l.a.pReadFile(n).then(function(e){g(e)});case 1:case"end":return e.stop()}},e)}),q=function(){var e=this,t=arguments;return new Promise(function(n,r){var o=R.apply(e,t);function c(e){m(o,n,r,c,a,"next",e)}function a(e){m(o,n,r,c,a,"throw",e)}c(void 0)})},function(){return q.apply(this,arguments)});var R,q;return e.createElement(e.Fragment,null,e.createElement("div",{style:{marginBottom:12}},e.createElement(o.a,{size:"small",onClick:D},"\u7f16\u8f91"),e.createElement(o.a,{type:"primary",size:"small",style:{marginLeft:12},onClick:function(){var e=h.join(d,"tmp.txt");P(""),"string"==typeof w?l.a.pWriteFile(e,w).then(function(){return k?["echo '".concat(k,"' | sudo -S chmod 777 ").concat(n),'cat "'.concat(e,'" > ').concat(n),"echo '".concat(k,"' | sudo -S chmod 644 ").concat(n)].join(" && "):['cat "'.concat(e,'" > ').concat(n),"rm -rf ".concat(e)].join(" && ")}).then(function(e){v(e,function(e,t,n){if(!e)return c.a.success("\u6587\u4ef6\u4fdd\u5b58\u6210\u529f"),void P("success");var r;!k||(r=(r=t+n).toLowerCase(),["Permission denied","incorrect password","Password:Sorry, try again."].find(function(e){return r.includes(e.toLowerCase())}))?j(!0):c.a.error(e)})}).catch(function(e){c.a.error(e.toString())}):c.a.error("")}},"\u4fdd\u5b58"),e.createElement("div",{className:"g-sm-info"},"\u5982\u6709\u9519\u8bef\u8bf7\u68c0\u67e5 setting \u9875\u9762\u547d\u4ee4\u914d\u7f6e\u662f\u5426\u6b63\u786e"),e.createElement("div",{style:{color:a.a[C],fontSize:"16px",height:32},className:"g-fr"},"success"===C&&e.createElement(r.a,{type:"check-circle"}),"error"===C&&e.createElement(r.a,{type:"close-circle"}))),e.createElement("div",{className:"g-content"},e.createElement(i.a,{value:w,options:{mode:"shell"},onChange:function(e){return g(e)}}),E&&e.createElement(p.default,{saveData:function(e){u.a.set({sudo_pswd:e}),F(e),_()},onCancel:_})))}}.call(this,n(1))},678:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={success:"#52c41a",error:"#f5222d"}},679:function(e,t,n){"use strict";var r=n(661),o=n.n(r),c=(n(694),n(695),n(696),n(697),n(698),n(0)),a=n.n(c),i=n(1),u=n.n(i),s=n(680),f=n.n(s);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,c=new Array(r),a=0;a<r;a++)c[a]=arguments[a];return(n=y(this,(e=h(t)).call.apply(e,[this].concat(c)))).initCm=function(){var e=n.props,t=e.value,r=e.options;n.cm=o.a.fromTextArea(n.textRef,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){p(e,t,n[t])})}return e}({lineNumbers:!0,matchBrackets:!0,keyMap:"sublime",mode:"nginx"},r||{})),n.cm.on("change",function(){return n._onChange()}),n.cm.getDoc().setValue(t||"")},n._onChange=function(){var e=n.cm.getDoc().getValue();n.props.onChange(e)},n}var n,r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,u.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){this.initCm()}},{key:"componentDidUpdate",value:function(e){this.props.value&&!e.value&&this.cm.getDoc().setValue(this.props.value||"")}},{key:"render",value:function(){var e=this;return u.a.createElement("div",{className:f.a.textarea},u.a.createElement("textarea",{ref:function(t){return e.textRef=t},onChange:function(){}}))}}])&&m(n.prototype,r),c&&m(n,c),t}();d.propTypes={onChange:a.a.func.isRequired,options:a.a.object,value:a.a.string},t.a=d},680:function(e,t,n){e.exports={textarea:"_1jDF2mxCHOgLFbxo0k05qs"}},707:function(e,t,n){(function(e){var n=window.require("fs");t.getUserHome=function(){return e.env["win32"===e.platform?"USERPROFILE":"HOME"]};var r=t.isFile=function(e){try{if(n.statSync(e).isFile())return!0}catch(e){}return!1};t.isDirectory=function(e){try{if(n.statSync(e).isDirectory())return!0}catch(e){}return!1};var o=t.writeFile=function(e,t,o){r(e)?o():n.writeFile(e,t,"utf-8",o)};t.pWriteFile=function(e,t){return new Promise(function(n,r){o(e,t,function(e,t){return e?r(e):n(t)})})};var c=t.readFile=function(e,t){r(e)?n.readFile(e,"utf-8",t):t(null,"")};t.pReadFile=function(e){return new Promise(function(t,n){c(e,function(e,r){return e?n(e):t(r)})})}}).call(this,n(169))}}]);