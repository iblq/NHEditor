/*! 2019-05-06 16:09:36 */
(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{662:function(t,e,n){"use strict";n.r(e),function(t){var r,o=n(681),a=n(693),i=n(52),c=n(692),s=n(666),u=n(673),l=n(672),f=n(1),p=n(694),y=n(163),m=n(3),h=n.n(m);n(675);function d(t){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function g(t,e){return!e||"object"!==d(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function w(t){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function v(t,e){return(v=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var S=window.require("fs"),E=(window.require("path"),window.require("child_process")),O=E.exec,j=(E.execSync,l.a.TextArea),_={cwd:"/"},x=Object(y.b)("homeStore","homeActions")(r=Object(p.a)(r=Object(y.c)(r=function(e){function n(){var t,e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=g(this,(t=w(n)).call.apply(t,[this].concat(o)))).state={content:"",path:"/usr/local/etc/nginx/nginx.conf",info:"",type:"edit",status:"success",loading:!1},e.readFile=function(){S.readFile(e.state.path,"utf8",function(t,n){e.setState({content:n,type:"edit"})})},e.onChange=function(t){e.setState({content:t.target.value})},e.updateInfo=function(t){var n="".concat(e.state.info," ").concat(h()(new Date).format("h:mm:ss"),">  ").concat(t);e.setState({type:"info",info:n})},e.onSaveFile=function(){var t=e.state,n=t.path,r=t.content;S.writeFile(n,r,"utf8",function(t){if(t)return e.updateInfo(t),void u.a.error("\u6587\u4ef6\u4fdd\u5b58\u9519\u8bef")})},e.onRestart=function(){var t=e.state,n=t.path,r=t.content;S.writeFile(n,r,"utf8",function(t){if(t)return e.updateInfo(t),void u.a.error("\u6587\u4ef6\u4fdd\u5b58\u9519\u8bef");O("/usr/local/bin/nginx -t",_,function(t,n,r){if(e.updateInfo(t||n||r),t)return u.a.error("\u914d\u7f6e\u6587\u4ef6\u7f16\u8f91\u9519\u8bef\uff0c\u8bf7\u4fee\u6539\u540e\u518d\u8bd5"),e.setState({status:"error"}),!1;e.setState({loading:!0}),O("/usr/local/bin/nginx -s reload",_,function(t,n,r){if(e.updateInfo(t||n||r||"restart success"),t)return!1;e.setState({status:"success",loading:!1}),u.a.success("\u91cd\u542f\u6210\u529f")})})})},e}var r,l,p;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&v(t,e)}(n,f["Component"]),r=n,(l=[{key:"componentDidMount",value:function(){this.readFile()}},{key:"render",value:function(){var e=this,n=this.state,r=n.content,u=n.type,l=n.info,f=n.status;return t.createElement("div",{className:"ATVO5_xlPwyjIhVXSIb5A"},t.createElement(a.a,{style:{marginBottom:12}},t.createElement(c.a,{span:12},t.createElement(s.a,{size:"small",type:"edit"===u?"primary":"default",onClick:this.readFile},"\u7f16\u8f91"),t.createElement(s.a,{size:"small",type:"info"===u?"primary":"default",style:{marginLeft:12},onClick:function(){return e.setState({type:"info"})}},"\u65e5\u5fd7")),t.createElement(c.a,{span:12},t.createElement("div",{style:{color:{success:"#52c41a",error:"#f5222d"}[f],fontSize:"16px"},className:"g-fr"},"success"===f&&t.createElement(i.a,{type:"check-circle"}),"error"===f&&t.createElement(i.a,{type:"close-circle"})),t.createElement(s.a,{type:"primary",size:"small",className:"g-fr",style:{marginRight:12},onClick:this.onRestart},"\u91cd\u542f"))),t.createElement(o.a,{spinning:this.state.loading,tip:"Loading..."},"edit"===u?t.createElement(j,{className:"tg3GGhnCcUWjVuh6b9hgu",onChange:this.onChange,value:r,onBlur:this.onBlur}):t.createElement(j,{className:"_3mn3R6vorQgwt3QrohFmWJ",value:l})))}}])&&b(r.prototype,l),p&&b(r,p),n}())||r)||r)||r;e.default=x}.call(this,n(1))},675:function(t,e,n){t.exports={info:"_36J4lVVd0RGzRUMr-sGvsu",wrap:"ATVO5_xlPwyjIhVXSIb5A",textarea:"tg3GGhnCcUWjVuh6b9hgu",log:"_3mn3R6vorQgwt3QrohFmWJ"}}}]);